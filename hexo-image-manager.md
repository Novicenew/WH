# Hexo博客图片管理指南

## 图片相关问题与解决方案

在Hexo博客中，图片管理是一个常见的问题。本文档提供了全面的图片管理解决方案。

### 1. 图片上传与引用机制

Hexo默认使用**文章资源文件夹**机制管理图片，您的项目已启用此功能（`post_asset_folder: true`）。并且已安装**hexo-asset-image**插件增强图片管理功能。

#### 工作原理

1. 创建新文章时，Hexo会自动创建同名文件夹
2. 图片应放入该文件夹中
3. 在文章中使用相对路径引用图片

#### 正确的图片引用方式

使用hexo-asset-image插件后，推荐以下方式引用图片：

```markdown
![图片描述](图片名.jpg)
```

或者使用标签插件方式：

```markdown
{% asset_img 图片名.jpg 图片描述 %}
```

而不是：
```markdown
![图片描述](./图片名.jpg) 或 ![图片描述](文章名/图片名.jpg)
```

### 2. 常见问题与解决方案

#### 问题1: 在本地编辑预览时看不到图片

**解决方案**:
- 使用专用的Markdown编辑器(如Typora)，并设置正确的图片根目录
- 使用`hexo server`命令启动本地预览服务器
- 确保已安装`hexo-asset-image`插件
- 使用提供的`hexo-image-uploader.bat`脚本处理图片

#### 问题2: 图片引用路径错误

**解决方案**:
- 确保_config.yml中已配置：
  ```yml
  post_asset_folder: true
  marked:
    prependRoot: true
    postAsset: true
  ```
- 使用提供的脚本自动修复引用路径
- 确保图片名称不包含中文和特殊字符
- 检查图片是否放在了正确的文件夹中

#### 问题3: 中文文件名导致的问题

**解决方案**:
- 使用脚本的"批量重命名图片"功能自动处理
- 避免在图片名称中使用中文和特殊字符

### 3. 工作流程建议

#### 创建新文章

1. 使用Hexo CLI创建文章：`hexo new "文章标题"`
2. 确认文章同名目录已创建

#### 添加图片

**方法1: 使用剪贴板导入工具**
1. 复制图片到剪贴板
2. 运行`hexo-image-uploader.bat`
3. 选择选项4，输入文章标题
4. 复制生成的Markdown引用代码到文章中

**方法2: 手动管理图片**
1. 将图片文件复制到文章同名文件夹中
2. 在文章中使用`![描述](图片名.jpg)`或`{% asset_img 图片名.jpg 图片描述 %}`格式引用图片
3. 使用脚本的"扫描并修复"功能确保引用正确

#### 发布前图片检查

在部署前，运行脚本的"扫描并修复"功能，确保所有图片引用正确。

### 4. 全局图片使用

对于多篇文章共用的图片，应放置在`source/img/`目录下，并使用以下格式引用：

```markdown
![描述](/img/图片名.jpg)
```

### 5. 图片最佳实践

- 使用PNG格式保存截图和UI图片
- 使用JPG格式保存照片
- 图片分辨率不要过大，建议宽度不超过1000px
- 定期使用脚本的"批量优化图片大小"功能减小文件体积

### 6. 故障排除

如果图片仍然无法显示，请检查：

1. 图片文件是否实际存在于相应目录
2. 图片引用语法是否正确
3. 图片路径是否包含特殊字符
4. Hexo配置文件中的配置是否正确：
   ```yml
   post_asset_folder: true
   marked:
     prependRoot: true
     postAsset: true
   ```
5. 是否正确安装了hexo-asset-image插件：
   ```bash
   npm install hexo-asset-image --save
   ```

使用提供的`hexo-image-uploader.bat`脚本可以解决大多数图片问题。 